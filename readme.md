### Задание:

Нужно написать код с нуля. Конечно, всегда есть куда улучшать до бесконечности, но для оптимального обсуждения стоит ориентироваться на примерно 4 часа работы.
Использование библиотек или готовых компонентов приветствуется, изобретать велосипеды не нужно. Наш проект написан на Symfony поэтому использование их фреймворка или компонентов будет плюсом, но это не принципиально и решения на других компонентах тоже принимаются.

Задача. Нужен сервис, который представляет из себя обработчик платежей с логикой общения с покупателем.
Платёж в данном случае это POST-запрос к сервису на любой придуманный эндпоинт в определённом формате:
```json
{
    "token": "{uuid}",
    "status": "(authorized|confirmed|rejected|refunded)",
    "order_id": 1234567890,
    "amount": 20000,
    "currency": "(RUB|USD|EUR)",
    "error_code": "(76543|null)",
    "pan": "12341********234",
    "user_id": "876123654",
    "language_code": "(ru|en)"
}
```
Где `user_id` это уникальный идентификатор пользователя:
- если платежей от него ранее не было, то это означает "человек оплатил подписку";
- если платежи от него были ранее, то это означает "человек продлил подписку".
NB: в задании можно не добавлять реальное хранилище данных (опционально), достаточно иметь решение в коде на этот счёт.

После получения платежа нужно посылать ему уведомление в Телеграм. Нюансы для тестового задания:
- `user_id` это его идентификатор в ТГ.
- Нужно иметь код для работы с ТГ, в тестовом задании реальных запросов можно не слать, токен тг-бота можно захардкодить случайным.
- Сообщения должны быть различные в зависимости от статуса платежа (успех, ошибка).
- Сообщения должны быть различные в зависимости от того это новая подписка и продление.
- Сообщения должны быть переведён на два языка: en, ru.
- Сообщения должны поддерживать форматирование (жирный, курсив, и т.д.).
- Сам текст не принципиален, можно рыбу, главное чтобы он различался исходя из параметров выше.

Следует учесть что хайлоада здесь нет и нагрузка небольшая, однако бывают острые пики нагрузки: например, кто-то резко запустил рекламу на большую аудиторию. У Телеграм есть ограничения на запросы к их серверам в единицу времени (ориентируйтесь на 10 запросов / сек), однако надо в решении учесть, что в пиковой нагрузке количество платежей точно больше этого ограничения.

Бонусом в архитектуре решения будет учесть наличие другого платёжного шлюза: то есть, хотя бы теоретическое наличие другого формата данных на другой эндпоинт, но с сохранением логики обработки платежа из описания выше.

---

### Решение:


